create database retrogroove;

-- tabla de productos
create table productos (
    id SERIAL primary key, 
    id_usuario INTEGER REFERENCES usuarios(id), 
    titulo VARCHAR(50),
    formato VARCHAR(10),
    imagen VARCHAR(200),
    precio NUMERIC,
    vendido BOOLEAN DEFAULT false)


-- tabla de usuarios
create table usuarios (
    id Serial primary key, 
    email VARCHAR(255), 
    password VARCHAR (255))

    ALTER TABLE IF EXISTS public.usuarios
    ALTER COLUMN email SET NOT NULL;

ALTER TABLE IF EXISTS public.usuarios
    ALTER COLUMN password SET NOT NULL;

ALTER TABLE IF EXISTS public.usuarios
    ADD COLUMN nombre character varying(100) NOT NULL;

ALTER TABLE IF EXISTS public.usuarios
    ADD COLUMN apellido character varying(100) NOT NULL;
ALTER TABLE IF EXISTS public.usuarios
    ADD CONSTRAINT email_unique UNIQUE (email);

-- tabla intermedia, likes de usuarios
create table usuarios_likes (
    id_productos INTEGER references productos (id), 
    id_usuarios INTEGER references usuarios (id))

